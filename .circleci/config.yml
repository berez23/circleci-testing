version: 2

jobs:
    build:
        docker:
            - image: buildpack-deps:artful

        steps:
            - checkout

            - setup_remote_docker
            
            - run:
                name: Install Docker
                command: |
                  apt-get update
                  apt-get --yes --force-yes install \
                    apt-transport-https \
                    ca-certificates \
                    curl \
                    software-properties-common
                  curl -fsSL https://download.docker.com/linux/ubuntu/gpg | apt-key add -
                  add-apt-repository \
                    "deb [arch=amd64] https://download.docker.com/linux/ubuntu \
                    $(lsb_release -cs) \
                    stable"
                  apt update
                  apt install docker-ce

            - run:
                name: Test Docker
                command: docker run ubuntu uname -a

            - run:
                name: Test Docker The Right Way (tm)
                command: docker ps
